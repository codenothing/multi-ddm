/*
 * Multi-level Drop Down Menu [VERSION]
 * [DATE]
 * Corey Hart @ http://www.codenothing.com
 *
 * Credit to Shaun Johnson for pointing out the Prototype confliction, and IE6 bgiframe fix
 */
(function(b,a,c){b.fn.reverse=[]._reverse||[].reverse;b.fn.bgiframe=b.fn.bgiframe?b.fn.bgiframe:b.fn.bgIframe?b.fn.bgIframe:function(){return this};b.fn.dropDownMenu=function(d){return this.each(function(){var m=b(this),j,n,k,g,e,h=b.extend({timer:500,allowSniff:true,parentMO:c,childMO:c,levels:[],numberOfLevels:5},d||{},b.metadata?m.metadata():{});if(h.levels.length){h.numberOfLevels=h.levels.length}else{h.levels[0]=h.parentMO?h.parentMO:h.childMO;for(g=0,e=h.numberOfLevels+1;++g<e;){h.levels[g]=h.childMO}}j=m.children("li").data({"multi-ddm-classname":h.levels[(g=0)],"multi-ddm-firstlevel":true});while(h.levels[++g]){j=j.find("> ul > li").data("multi-ddm-classname",h.levels[g]);if(j.length===0){break}}m.delegate("li","mouseenter.multi-ddm",function(){var i=b(this);if(k){clearTimeout(k)}i.siblings("li").find("ul:visible").reverse().each(function(){var l=b(this).hide(),o=b(this).parent();o.children("a").removeClass(o.data("multi-ddm-classname"))}).end().each(function(){var l=b(this);l.children("a").removeClass(l.data("multi-ddm-classname"))});i.children("a").addClass(i.data("multi-ddm-classname")).siblings("ul").bgiframe().show().children("li").each(function(){var l=b(this);l.children("a").removeClass(l.data("multi-ddm-classname"))})}).bind("mouseleave.multi-ddm",function(){k=setTimeout(f,h.timer)});function f(){m.find("li").each(function(){var i=b(this);i.children("a").removeClass(i.data("multi-ddm-classname"))});m.find("ul:visible").reverse().hide();if(k){clearTimeout(k)}}b(a.document||{}).bind("click.multi-ddm",f)})}})(jQuery,window||this);